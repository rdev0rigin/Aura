<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Web Client</title>
</head>
<body>
    <button onclick="onPub()">Publish</button>
	<script src="https://unpkg.com/autobahn-browser@^18/autobahn.js"></script>

	<script>
        var sess = {};
		try {
			// for Node.js
			var autobahn = require('autobahn');
		} catch (e) {
			// for browsers (where AutobahnJS is available globally)
		}

		var connection = new autobahn.Connection({url: 'ws://127.0.0.1:3131/', realm: 'nexus.aura.realm1'});

		connection.onopen = function (session) {
			// 1) subscribe to a topic
			function onevent(args) {
				console.log("Event:", args[0]);
			}
			session.subscribe('hello.wamp', onevent);
            sess = session;



			// 3) register a procedure for remoting
			// function add2(args) {
			//     return args[0] + args[1];
			// }
			// session.register('com.myapp.add2', add2);
			//
			// 4) call a remote procedure
			// session.call('com.myapp.add2', [2, 3]).then(
			//     function (res) {
			//         console.log("Result:", res);
			//     }
			// );
		};

		function onPub() {
			sess.publish('hello.wamp', ['Hello, Nexus!']);
        }
		connection.open();
	</script>

</body>
</html>